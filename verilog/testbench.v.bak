module testbench;


reg [15:0] x , y , z , counter , cData;
wire [15:0] res1;
wire [15:0] res2; 
reg mode;
reg reset = 1;
reg start = 0; 
reg clk = 1'b0;
   

integer data_file;
integer scan_file;
integer data_file_mode;
integer scan_file_mode;
integer result_file;
integer print_file;


initial
begin
      forever
        #10 clk = !clk;
end


cordic c1( mode, x, y, z, clk, reset, res1, res2);

initial
begin
	reset = 0;
	#10;
	reset = 1;
	start = 1;
end


initial begin
data_file = $fopen("test_read.txt", "r");
data_file_mode = $fopen("test_read_mode.txt" , "r");
if (data_file == 0) 
begin
$display("data_file handle was NULL");
$finish;
end
end

 
always @( negedge clk or negedge reset)
begin
 	if(start)
	begin
		if(counter < 100)
		begin
		scan_file_mode = $fscanf(data_file_mode, "%b\n", mode);
		scan_file = $fscanf(data_file , "%b\n" , cData);
		x = cData;
		scan_file = $fscanf(data_file , "%b\n" , cData);
		y = cData;
		if( mode === 0)
		begin 
			scan_file = $fscanf(data_file , "%b\n" , cData);
			z = cData;
		end
		counter <= counter + 1;
		end
	end

end



initial 
$monitor($time, " Output cData = %b",  cData); 


endmodule
